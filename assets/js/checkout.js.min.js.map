{"version":3,"file":"checkout.js.min.js","mappings":"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","sources":["webpack://payer-for-woocommerce/./assets/js/checkout.js"],"sourcesContent":["jQuery( function ( $ ) {\n    var wc_payer_checkout = {\n        moveInputFields: function () {\n            var pno_field = $( \"#billing_pno_field\" ),\n                post_code = $( \"#billing_postcode_field\" ),\n                customer_details = $( \"div.woocommerce-billing-fields div\" ),\n                button = $( \"#payer_get_address\" )\n\n            pno_field.addClass( \"form-row-first\" )\n            post_code.addClass( \"form-row-last\" )\n            post_code.removeClass( \"form-row-wide\" )\n            post_code.before( '<div id=\"payer_postcode_placeholder\"></div>' )\n            customer_details.prepend( post_code )\n            customer_details.prepend( pno_field )\n            post_code.after( button )\n        },\n\n        hidePNOfield: function () {\n            var pno_field = $( \"#billing_pno_field\" )\n            $( pno_field ).hide()\n        },\n\n        hideAddressButton: function () {\n            var button = $( \"#payer_get_address\" )\n            $( button ).hide()\n        },\n\n        showPNOfield: function () {\n            var pno_field = $( \"#billing_pno_field\" )\n            $( pno_field ).show()\n        },\n\n        showAddressButton: function () {\n            var button = $( \"#payer_get_address\" )\n            $( button ).show()\n        },\n\n        resetPostCodeField: function () {\n            var placeholder_div = $( \"#payer_postcode_placeholder\" ),\n                post_code = $( \"#billing_postcode_field\" )\n\n            placeholder_div.before( post_code )\n            placeholder_div.remove()\n            post_code.removeClass( \"form-row-last\" )\n            post_code.addClass( \"form-row-wide\" )\n        },\n\n        addGetAddressButton: function () {\n            var post_code = $( \"#billing_postcode_field\" ),\n                button =\n                    '<button type=\"button\" class=\"payer_get_address_button button\" id=\"payer_get_address\">' +\n                    payer_checkout_params.get_address_text +\n                    \"</button>\"\n\n            post_code.after( button )\n        },\n\n        getAddress: function () {\n            var personal_number = $( \"#billing_pno\" ).val(),\n                zip_code = $( \"#billing_postcode\" ).val()\n            ;( button = $( \"#payer_get_address\" ) ), ( response_message_field = $( \"#payer-get-address-response\" ) )\n\n            response_message_field.remove()\n            // Add spinner\n            button.prop( \"disabled\", true )\n            button.addClass( \"payer_spinner\" )\n            $.ajax( {\n                type: \"POST\",\n                url: payer_checkout_params.get_address,\n                data: {\n                    action: \"get_address\",\n                    personal_number: personal_number,\n                    zip_code: zip_code,\n                },\n                dataType: \"json\",\n                success: function ( data ) {\n                    var address_data = data.data.address_information,\n                        message = data.data.message\n                    if ( data.success === false ) {\n                        button.after(\n                            '<div id=\"payer-get-address-response\" class=\"woocommerce-error\">' + message + \"</div>\",\n                        )\n                    } else {\n                        button.after(\n                            '<div id=\"payer-get-address-response\" class=\"woocommerce-message\">' + message + \"</div>\",\n                        )\n                        wc_payer_checkout.populateAddressFields( address_data )\n                    }\n                },\n                error: function ( data ) {},\n                complete: function ( data ) {\n                    button.prop( \"disabled\", false )\n                    // Remove spinner\n                    button.removeClass( \"payer_spinner\" )\n                    $( \"body\" ).trigger( \"update_checkout\" )\n                },\n            } )\n        },\n        populateAddressFields: function ( address_data ) {\n            // Set fields\n            var first_name = $( \"#billing_first_name\" ),\n                last_name = $( \"#billing_last_name\" ),\n                organisation = $( \"#billing_company\" ),\n                city = $( \"#billing_city\" ),\n                post_code = $( \"#billing_postcode\" ),\n                address_1 = $( \"#billing_address_1\" ),\n                address_2 = $( \"#billing_address_2\" )\n            // Populate fields\n            first_name.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.first_name )\n                    : address_data.first_name,\n            )\n            last_name.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.last_name )\n                    : address_data.last_name,\n            )\n            organisation.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.organisation )\n                    : address_data.organisation,\n            )\n            city.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.city )\n                    : address_data.city,\n            )\n            post_code.val( address_data.zip_code )\n            address_1.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.address_1 )\n                    : address_data.address_1,\n            )\n            address_2.val(\n                \"\" === address_data.organisation\n                    ? wc_payer_checkout.maskFormField( address_data.address_2 )\n                    : address_data.address_2,\n            )\n        },\n        maskFormField: function ( field ) {\n            if ( field !== \"\" ) {\n                var field_split = field.split( \" \" )\n                var field_masked = new Array()\n\n                $.each( field_split, function ( i, val ) {\n                    if ( isNaN( val ) ) {\n                        field_masked.push( val.charAt( 0 ) + Array( val.length ).join( \"*\" ) )\n                    } else {\n                        field_masked.push( \"**\" + val.substr( val.length - 3 ) )\n                    }\n                } )\n\n                return field_masked.join( \" \" )\n            }\n        },\n\n        addBodyClass: function () {\n            $( \"body\" ).addClass( \"payer-active\" )\n        },\n\n        removeBodyClass: function () {\n            $( \"body\" ).removeClass( \"payer-active\" )\n        },\n\n        checkIfPnoIsFilled: function () {\n            var payment_method = $( 'input[name=\"payment_method\"]:checked' ).val()\n\n            if ( \"payer_direct_invoice_gateway\" === payment_method ) {\n                if ( $( \"#billing_pno\" ).val() === \"\" ) {\n                    $( \"#place_order\" ).prop( \"disabled\", true )\n                } else {\n                    $( \"#place_order\" ).prop( \"disabled\", false )\n                }\n            } else {\n                $( \"#place_order\" ).prop( \"disabled\", false )\n            }\n        },\n    }\n\n    $( \"body\" ).on( \"click\", \"#payer_get_address\", function () {\n        wc_payer_checkout.getAddress()\n    } )\n    $( document ).ready( function () {\n        if ( payer_checkout_params.locale === \"SE\" && payer_checkout_params.enable_get_address === \"yes\" ) {\n            wc_payer_checkout.addGetAddressButton()\n            wc_payer_checkout.moveInputFields()\n            wc_payer_checkout.showPNOfield()\n            wc_payer_checkout.showAddressButton()\n            wc_payer_checkout.addBodyClass()\n            wc_payer_checkout.checkIfPnoIsFilled()\n        }\n    } )\n    $( document.body ).on( \"change\", \"input[name='payment_method']\", function ( event ) {\n        if ( payer_checkout_params.masterpass_campaign === \"1\" ) {\n            $( \"body\" ).trigger( \"update_checkout\" )\n        }\n        wc_payer_checkout.checkIfPnoIsFilled()\n    } )\n    $( \"form.checkout\" ).on( \"keyup\", \"#billing_pno\", function () {\n        wc_payer_checkout.checkIfPnoIsFilled()\n    } )\n    $( \"body\" ).on( \"updated_checkout\", function () {\n        wc_payer_checkout.checkIfPnoIsFilled()\n    } )\n} )\n"],"names":["jQuery","$","wc_payer_checkout","moveInputFields","pno_field","post_code","customer_details","button","addClass","removeClass","before","prepend","after","hidePNOfield","hide","hideAddressButton","showPNOfield","show","showAddressButton","resetPostCodeField","placeholder_div","remove","addGetAddressButton","payer_checkout_params","get_address_text","getAddress","personal_number","val","zip_code","response_message_field","prop","ajax","type","url","get_address","data","action","dataType","success","address_data","address_information","message","populateAddressFields","error","complete","trigger","first_name","last_name","organisation","city","address_1","address_2","maskFormField","field","field_split","split","field_masked","Array","each","i","isNaN","push","charAt","length","join","substr","addBodyClass","removeBodyClass","checkIfPnoIsFilled","on","document","ready","locale","enable_get_address","body","event","masterpass_campaign"],"sourceRoot":""}